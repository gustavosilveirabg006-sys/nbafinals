<%-include('../cabecalho.ejs')%>
  <section class="section">
    <div style="display:flex; align-items:end; justify-content:space-between; gap:16px; flex-wrap:wrap;">
      <div>
        <h2>Times de Basquete</h2>
        <p>Gerencie sua coleção de times</p>
      </div>
      <div class="actions">
        <a href="/time/add" class="btn primary">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 5a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H6a1 1 0 110-2h5V6a1 1 0 011-1z" />
          </svg>
          Adicionar Time
        </a>
      </div>
    </div>
    <!-- Formulário de pesquisa -->
    <div style="flex: 0 0 auto; width: 70%; margin-top:12px;">
      <form action="/time/lst" method="post">
        <input type="text" name="pesquisa" id="pesquisa" placeholder="Digite a pesquisa aqui"
          value="<%= typeof pesquisa !== 'undefined' ? pesquisa : '' %>">
        <button type="submit" class="icon-btn" title="Pesquisar" aria-label="Pesquisar">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8" />
            <line x1="21" y1="21" x2="16.65" y2="16.65" />
          </svg>
        </button>
      </form>
    </div>
    <!-- fim do formulário de pesquisa -->

    <div class="table-wrap" style="margin-top:14px;">
      <table>
        <thead>
          <tr>
            <th>Foto</th>
            <th>Nome</th>
            <th>Vitórias</th>
            <th>Derrotas</th>
            <th>Jogadores</th>
            <th>Títulos</th>
            <th>Win Rate</th>
            <th class="actions-cell">Ações</th>
          </tr>
        </thead>
        <tbody>
          <% 
          const lista = (typeof times !== 'undefined' && times) ? times : ((typeof Times !== 'undefined' && Times) ? Times : []);
          lista.forEach(time => { 
          %>
            <tr>
              <td><img src="<%=time.foto%>" width="180" height="150"></td>
              <td>
                <%= time.nome %>
              </td>
              <td>
                <%= time.vitorias %>
              </td>
              <td>
                <%= time.derrotas %>
              </td>
              <td>
                <%= time.jogadores %>
              </td>
              <td>
                <%= time.titulos %>
              </td>
              <td>
                <%= time.winRate %>
              </td>
              <td class="actions-cell">
                <a href="/time/edt/<%= time.id %>" class="icon-btn" title="Editar" aria-label="Editar">
                  <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 20h9" />
                    <path d="M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4 12.5-12.5z" />
                  </svg>
                </a>
                <a href="/times/del/<%= time.id %>" class="icon-btn" title="Excluir" aria-label="Excluir">
                  <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="3 6 5 6 21 6" />
                    <path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6" />
                    <path d="M10 11v6" />
                    <path d="M14 11v6" />
                    <path d="M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2" />
                  </svg>
                </a>
              </td>
            </tr>
            <% }) %>
        </tbody>
      </table>
    </div>
  </section>

  <%-include('../rodape.ejs')%>